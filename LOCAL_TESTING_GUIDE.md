# 本地测试指南

**文档版本**: v2.0
**创建时间**: 2026-02-04

---

## 📋 快速开始

### 方式1: 使用启动脚本 (最简单)

```bash
cd ~/projects/claude/cloudflare/history-quiz-app
chmod +x start-server.sh
./start-server.sh
```

然后在浏览器中访问:
- http://localhost:8000/

### 方式2: 手动启动服务器

```bash
cd ~/projects/claude/cloudflare/history-quiz-app
python3 -m http.server 8000
```

然后在浏览器中访问:
- http://localhost:8000/

### 方式3: 使用 VS Code Live Server

1. 在 VS Code 中打开项目文件夹
2. 安装 "Live Server" 扩展
3. 右键点击 `index.html` 或 `history-quiz-v2.html`
4. 选择 "Open with Live Server"

---

## 🎨 页面外观说明

### 首页 (index.html)

```
┌─────────────────────────────────────────┐
│                                         │
│         v2.0 · 全新升级                 │
│                                         │
│      📚 历史练习应用                    │
│   1182 道初中历史核心考点               │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │  ⚡ 快速背题                    │   │
│  │  分类学习 · 错题重做            │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │  📖 完整练习                    │   │
│  │  全部题目 · 详细统计            │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ✨ 新版特性                           │
│  ✓ 双模式学习                         │
│  ✓ 分类学习                           │
│  ✓ 错题重做                           │
│  ✓ 进度保存                           │
│  ✓ 先想再看                           │
│  ✓ 详细统计                           │
│                                         │
└─────────────────────────────────────────┘
```

### 快速背题模式 (history-quiz-v2.html)

```
┌─────────────────────────────────────────┐
│  ← 返回首页                             │
│                                         │
│  📚 历史背题助手                        │
│  1182 个核心历史考点 · 按模块循序记忆  │
│                                         │
│  选择一个主题开始                       │
│  ┌──────────┬──────────┬──────────┐    │
│  │条约协议  │重大事件  │朝代更替  │    │
│  │18 题     │129 题    │129 题    │    │
│  └──────────┴──────────┴──────────┘    │
│                                         │
│  ┌──────────┬──────────┬──────────┐    │
│  │人物事迹  │文化成就  │社会制度  │    │
│  │...题     │...题     │...题     │    │
│  └──────────┴──────────┴──────────┘    │
│                                         │
│  [继续上次练习]                         │
│                                         │
│  先想再看 · 错题自动重练 · 进度自动保存 │
│                                         │
└─────────────────────────────────────────┘
```

### 答题界面

```
┌─────────────────────────────────────────┐
│  ← 返回首页                             │
│                                         │
│  条约协议 · 第 1 / 18 题                │
│  ████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░  │
│                                         │
│  已答题: 0    正确率: -%    剩余: 18   │
│                                         │
│  《南京条约》签订于哪一年？             │
│                                         │
│  [💭 我想好了，查看答案]                │
│                                         │
│  (答案隐藏中...)                        │
│                                         │
└─────────────────────────────────────────┘
```

点击"我想好了"后:

```
┌─────────────────────────────────────────┐
│  《南京条约》签订于哪一年？             │
│                                         │
│  1842 年，中国第一个不平等条约。        │
│                                         │
│  [✓ 答对了]  [✗ 答错了]                │
│                                         │
└─────────────────────────────────────────┘
```

---

## ✅ 功能测试清单

### 首页功能
- [ ] 页面正常加载
- [ ] 显示 v2.0 标记
- [ ] 两个模式按钮可点击
- [ ] 新版特性列表显示正确
- [ ] 响应式设计正常 (缩小窗口测试)

### 快速背题模式
- [ ] 分类按钮显示正确
- [ ] 可以选择分类
- [ ] 题目正常显示
- [ ] "我想好了" 按钮工作
- [ ] 答案显示正确
- [ ] 答对/答错按钮工作
- [ ] 进度条更新正确
- [ ] 统计信息更新正确
- [ ] 错题自动重做
- [ ] 进度保存到 localStorage

### 完整练习模式
- [ ] 年级分类显示正确
- [ ] 可以选择年级
- [ ] 题目正常显示
- [ ] 统计信息显示正确
- [ ] 进度条显示正确
- [ ] 完成后显示成绩

### 通用功能
- [ ] 返回首页按钮工作
- [ ] 继续上次练习功能
- [ ] localStorage 保存正常
- [ ] 手机端显示正常 (使用开发者工具)
- [ ] 平板端显示正常 (使用开发者工具)

---

## 🐛 调试技巧

### 打开浏览器开发者工具

**Chrome/Edge**: `F12` 或 `Ctrl+Shift+I`
**Firefox**: `F12` 或 `Ctrl+Shift+I`
**Safari**: `Cmd+Option+I`

### 查看控制台错误

1. 打开开发者工具
2. 点击 "Console" 标签
3. 查看是否有红色错误信息

常见错误:
- `CORS error` - 文件加载失败
- `Uncaught ReferenceError` - JavaScript 错误
- `Failed to load resource` - 文件不存在

### 查看 localStorage

1. 打开开发者工具
2. 点击 "Application" 或 "Storage" 标签
3. 展开 "Local Storage"
4. 查看 `http://localhost:8000` 的数据

应该看到:
- `state` - 当前学习状态
- `current` - 当前分类
- `list` - 题目列表
- `index` - 当前题目索引
- `wrong` - 错题列表

### 测试响应式设计

1. 打开开发者工具
2. 点击 "Toggle device toolbar" (Ctrl+Shift+M)
3. 选择不同的设备尺寸:
   - iPhone 12: 390x844
   - iPad: 768x1024
   - Desktop: 1920x1080

---

## 🎯 常见问题

### Q1: 为什么直接打开 HTML 文件不行？

**A**: 浏览器安全限制 (CORS)
- 直接打开使用 `file://` 协议
- 无法加载外部 JavaScript 文件
- localStorage 可能不可用
- 需要使用本地服务器

### Q2: 题库数据为什么不显示？

**A**: 可能原因:
1. `questions_full.js` 未加载
2. 文件路径不正确
3. 浏览器控制台有错误

**解决方案**:
- 检查浏览器控制台错误
- 确保 `questions_full.js` 在同一目录
- 使用本地服务器而不是直接打开

### Q3: localStorage 为什么不工作？

**A**: 可能原因:
1. 使用 `file://` 协议
2. 浏览器隐私模式
3. 浏览器禁用了 localStorage

**解决方案**:
- 使用本地服务器
- 关闭隐私模式
- 检查浏览器设置

### Q4: 如何清除学习进度？

**A**: 在浏览器控制台执行:
```javascript
localStorage.clear()
location.reload()
```

或者:
1. 打开开发者工具
2. 进入 Application/Storage
3. 右键点击 Local Storage
4. 选择 "Clear All"

---

## 📊 性能指标

| 指标 | 值 | 说明 |
|-----|-----|------|
| 首页加载 | < 100ms | 快速 |
| 题目加载 | < 50ms | 流畅 |
| 内存占用 | < 30MB | 低 |
| 响应时间 | < 16ms | 60fps |

---

## 🚀 部署到网络

### 部署到 Cloudflare Pages

```bash
# 已自动部署，访问:
https://his.juntop.me
https://history-quiz-app.pages.dev
```

### 部署到其他服务

1. **GitHub Pages**
   ```bash
   git push origin main
   ```

2. **Netlify**
   ```bash
   npm install -g netlify-cli
   netlify deploy --prod --dir=.
   ```

3. **Vercel**
   ```bash
   npm install -g vercel
   vercel --prod
   ```

---

## 📝 开发建议

### 添加新功能

1. 编辑 `history-quiz-v2.html`
2. 在本地服务器测试
3. 打开浏览器开发者工具检查错误
4. 提交到 Git
5. 推送到 GitHub

### 修改样式

1. 编辑 `<style>` 部分
2. 刷新浏览器查看效果
3. 使用开发者工具的元素检查器调试

### 调试 JavaScript

1. 在代码中添加 `console.log()`
2. 打开浏览器控制台查看输出
3. 使用断点调试 (F10 单步执行)

---

## 🎓 学习资源

- [MDN Web Docs](https://developer.mozilla.org/)
- [JavaScript 教程](https://javascript.info/)
- [CSS 教程](https://www.w3schools.com/css/)
- [HTML 教程](https://www.w3schools.com/html/)

---

**祝测试愉快！** 🎉

如有问题，请查看浏览器控制台的错误信息。
