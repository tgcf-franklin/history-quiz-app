<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<title>å†å²èƒŒé¢˜åŠ©æ‰‹</title>
<style>
body {
  margin: 0;
  background: #f5f6f8;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}
.app {
  max-width: 760px;
  margin: 0 auto;
  padding: 24px;
}
.card {
  background: #fff;
  border-radius: 14px;
  padding: 24px;
  box-shadow: 0 8px 24px rgba(0,0,0,.08);
}
h1 {
  margin-top: 0;
}
.section {
  margin-top: 24px;
}
.categories {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}
.cat {
  padding: 14px;
  background: #eef2ff;
  border-radius: 10px;
  text-align: center;
  cursor: pointer;
}
.cat:hover {
  background: #dfe6ff;
}
.progress {
  font-size: 14px;
  color: #666;
}
.question {
  font-size: 20px;
  margin: 24px 0;
}
.answer {
  background: #f0f4ff;
  padding: 16px;
  border-radius: 8px;
  display: none;
}
.buttons {
  display: flex;
  gap: 12px;
  margin-top: 20px;
}
button {
  flex: 1;
  padding: 12px;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}
.primary { background: #4f7cff; color: #fff; }
.success { background: #4caf50; color: #fff; }
.danger { background: #f44336; color: #fff; }
.secondary { background: #e0e0e0; }
.hidden { display: none; }
.footer {
  margin-top: 32px;
  font-size: 13px;
  color: #888;
  text-align: center;
}
</style>
</head>

<body>
<div class="app">
  <div class="card" id="home">
    <h1>ğŸ“š å†å²èƒŒé¢˜åŠ©æ‰‹</h1>
    <p class="progress">1182 ä¸ªæ ¸å¿ƒå†å²è€ƒç‚¹ Â· æŒ‰æ¨¡å—å¾ªåºè®°å¿†</p>

    <div class="section">
      <strong>é€‰æ‹©ä¸€ä¸ªä¸»é¢˜å¼€å§‹</strong>
      <div class="categories">
        <div class="cat" onclick="start('æ¡çº¦åè®®')">æ¡çº¦åè®®<br/>18 é¢˜</div>
        <div class="cat" onclick="start('é‡å¤§äº‹ä»¶')">é‡å¤§äº‹ä»¶<br/>129 é¢˜</div>
        <div class="cat" onclick="start('æœä»£æ›´æ›¿')">æœä»£æ›´æ›¿<br/>129 é¢˜</div>
      </div>
    </div>

    <div class="section">
      <button class="secondary" onclick="resume()">ç»§ç»­ä¸Šæ¬¡ç»ƒä¹ </button>
    </div>
  </div>

  <div class="card hidden" id="quiz">
    <div class="progress" id="progress"></div>
    <div class="question" id="question"></div>

    <div class="buttons">
      <button class="primary" id="thinkBtn">æˆ‘æƒ³å¥½äº†ï¼ŒæŸ¥çœ‹ç­”æ¡ˆ</button>
    </div>

    <div class="answer" id="answer"></div>

    <div class="buttons hidden" id="judgeBtns">
      <button class="success" onclick="mark(true)">ç­”å¯¹äº†</button>
      <button class="danger" onclick="mark(false)">ç­”é”™äº†</button>
    </div>

    <div class="buttons hidden" id="nextBtns">
      <button class="secondary" onclick="next()">ä¸‹ä¸€é¢˜</button>
    </div>
  </div>

  <div class="footer">
    å…ˆæƒ³å†çœ‹ Â· é”™é¢˜è‡ªåŠ¨é‡ç»ƒ Â· è¿›åº¦è‡ªåŠ¨ä¿å­˜
  </div>
</div>

<script>
const data = {
  "æ¡çº¦åè®®": [
    { q: "ã€Šå—äº¬æ¡çº¦ã€‹ç­¾è®¢äºå“ªä¸€å¹´ï¼Ÿ", a: "1842 å¹´ï¼Œä¸­å›½ç¬¬ä¸€ä¸ªä¸å¹³ç­‰æ¡çº¦ã€‚" },
    { q: "ã€Šé©¬å…³æ¡çº¦ã€‹ç­¾è®¢äºå“ªä¸€å¹´ï¼Ÿ", a: "1895 å¹´ï¼Œä¸­æ—¥ç”²åˆæˆ˜äº‰åã€‚" }
  ],
  "é‡å¤§äº‹ä»¶": [
    { q: "äº”å››è¿åŠ¨çš„å¯¼ç«ç´¢ï¼Ÿ", a: "å·´é»å’Œä¼šå¤–äº¤å¤±è´¥ã€‚" }
  ],
  "æœä»£æ›´æ›¿": [
    { q: "æ¸…æœå»ºç«‹äºå“ªä¸€å¹´ï¼Ÿ", a: "1636 å¹´ï¼ˆçš‡å¤ªææ”¹å›½å·ä¸ºæ¸…ï¼‰ã€‚" }
  ]
};

let list = [];
let index = 0;
let wrong = [];
let current = "";

function start(cat) {
  current = cat;
  list = [...data[cat]].slice(0, 10);
  index = 0;
  wrong = [];
  save();
  showQuiz();
}

function resume() {
  const saved = localStorage.getItem("current");
  if (!saved) return alert("æ²¡æœ‰å¯ç»§ç»­çš„è®°å½•");
  current = saved;
  list = JSON.parse(localStorage.getItem("list"));
  index = Number(localStorage.getItem("index"));
  wrong = JSON.parse(localStorage.getItem("wrong"));
  showQuiz();
}

function showQuiz() {
  document.getElementById("home").classList.add("hidden");
  document.getElementById("quiz").classList.remove("hidden");
  render();
}

function render() {
  const q = list[index];
  document.getElementById("progress").textContent =
    `${current} Â· ç¬¬ ${index + 1} / ${list.length} é¢˜`;
  document.getElementById("question").textContent = q.q;
  document.getElementById("answer").textContent = q.a;
  document.getElementById("answer").style.display = "none";
  document.getElementById("thinkBtn").style.display = "block";
  document.getElementById("judgeBtns").classList.add("hidden");
  document.getElementById("nextBtns").classList.add("hidden");
}

document.getElementById("thinkBtn").onclick = () => {
  document.getElementById("answer").style.display = "block";
  document.getElementById("judgeBtns").classList.remove("hidden");
  document.getElementById("thinkBtn").style.display = "none";
};

function mark(ok) {
  if (!ok) wrong.push(list[index]);
  save();
  document.getElementById("judgeBtns").classList.add("hidden");
  document.getElementById("nextBtns").classList.remove("hidden");
}

function next() {
  index++;
  if (index >= list.length) {
    if (wrong.length) {
      alert("å¼€å§‹é‡åšé”™é¢˜");
      list = wrong;
      wrong = [];
      index = 0;
    } else {
      alert("æœ¬æ¨¡å—å®Œæˆ");
      localStorage.clear();
      location.reload();
      return;
    }
  }
  save();
  render();
}

function save() {
  localStorage.setItem("current", current);
  localStorage.setItem("list", JSON.stringify(list));
  localStorage.setItem("index", index);
  localStorage.setItem("wrong", JSON.stringify(wrong));
}
</script>
</body>
</html>
